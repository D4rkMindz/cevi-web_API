(function defineMustache(global,factory)***REMOVED***if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string")***REMOVED***factory(exports)***REMOVED***else if(typeof define==="function"&&define.amd)***REMOVED***define(["exports"],factory)***REMOVED***else***REMOVED***global.Mustache=***REMOVED******REMOVED***;factory(global.Mustache)***REMOVED******REMOVED***)(this,function mustacheFactory(mustache)***REMOVED***var objectToString=Object.prototype.toString;var isArray=Array.isArray||function isArrayPolyfill(object)***REMOVED***return objectToString.call(object)==="[object Array]"***REMOVED***;function isFunction(object)***REMOVED***return typeof object==="function"***REMOVED***function typeStr(obj)***REMOVED***return isArray(obj)?"array":typeof obj***REMOVED***function escapeRegExp(string)***REMOVED***return string.replace(/[\-\[\]***REMOVED******REMOVED***()*+?.,\\\^$|#\s]/g,"\\$&")***REMOVED***function hasProperty(obj,propName)***REMOVED***return obj!=null&&typeof obj==="object"&&propName in obj***REMOVED***var regExpTest=RegExp.prototype.test;function testRegExp(re,string)***REMOVED***return regExpTest.call(re,string)***REMOVED***var nonSpaceRe=/\S/;function isWhitespace(string)***REMOVED***return!testRegExp(nonSpaceRe,string)***REMOVED***var entityMap=***REMOVED***"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"***REMOVED***;function escapeHtml(string)***REMOVED***return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s)***REMOVED***return entityMap[s]***REMOVED***)***REMOVED***var whiteRe=/\s*/;var spaceRe=/\s+/;var equalsRe=/\s*=/;var curlyRe=/\s*\***REMOVED***/;var tagRe=/#|\^|\/|>|\***REMOVED***|&|=|!/;function parseTemplate(template,tags)***REMOVED***if(!template)return[];var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace()***REMOVED***if(hasTag&&!nonSpace)***REMOVED***while(spaces.length)delete tokens[spaces.pop()]***REMOVED***else***REMOVED***spaces=[]***REMOVED***hasTag=false;nonSpace=false***REMOVED***var openingTagRe,closingTagRe,closingCurlyRe;function compileTags(tagsToCompile)***REMOVED***if(typeof tagsToCompile==="string")tagsToCompile=tagsToCompile.split(spaceRe,2);if(!isArray(tagsToCompile)||tagsToCompile.length!==2)throw new Error("Invalid tags: "+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*");closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1]));closingCurlyRe=new RegExp("\\s*"+escapeRegExp("***REMOVED***"+tagsToCompile[1]))***REMOVED***compileTags(tags||mustache.tags);var scanner=new Scanner(template);var start,type,value,chr,token,openSection;while(!scanner.eos())***REMOVED***start=scanner.pos;value=scanner.scanUntil(openingTagRe);if(value)***REMOVED***for(var i=0,valueLength=value.length;i<valueLength;++i)***REMOVED***chr=value.charAt(i);if(isWhitespace(chr))***REMOVED***spaces.push(tokens.length)***REMOVED***else***REMOVED***nonSpace=true***REMOVED***tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n")stripSpace()***REMOVED******REMOVED***if(!scanner.scan(openingTagRe))break;hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="=")***REMOVED***value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(closingTagRe)***REMOVED***else if(type==="***REMOVED***")***REMOVED***value=scanner.scanUntil(closingCurlyRe);scanner.scan(curlyRe);scanner.scanUntil(closingTagRe);type="&"***REMOVED***else***REMOVED***value=scanner.scanUntil(closingTagRe)***REMOVED***if(!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);token=[type,value,start,scanner.pos];tokens.push(token);if(type==="#"||type==="^")***REMOVED***sections.push(token)***REMOVED***else if(type==="/")***REMOVED***openSection=sections.pop();if(!openSection)throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)***REMOVED***else if(type==="name"||type==="***REMOVED***"||type==="&")***REMOVED***nonSpace=true***REMOVED***else if(type==="=")***REMOVED***compileTags(value)***REMOVED******REMOVED***openSection=sections.pop();if(openSection)throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))***REMOVED***function squashTokens(tokens)***REMOVED***var squashedTokens=[];var token,lastToken;for(var i=0,numTokens=tokens.length;i<numTokens;++i)***REMOVED***token=tokens[i];if(token)***REMOVED***if(token[0]==="text"&&lastToken&&lastToken[0]==="text")***REMOVED***lastToken[1]+=token[1];lastToken[3]=token[3]***REMOVED***else***REMOVED***squashedTokens.push(token);lastToken=token***REMOVED******REMOVED******REMOVED***return squashedTokens***REMOVED***function nestTokens(tokens)***REMOVED***var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,numTokens=tokens.length;i<numTokens;++i)***REMOVED***token=tokens[i];switch(token[0])***REMOVED***case"#":case"^":collector.push(token);sections.push(token);collector=token[4]=[];break;case"/":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)***REMOVED******REMOVED***return nestedTokens***REMOVED***function Scanner(string)***REMOVED***this.string=string;this.tail=string;this.pos=0***REMOVED***Scanner.prototype.eos=function eos()***REMOVED***return this.tail===""***REMOVED***;Scanner.prototype.scan=function scan(re)***REMOVED***var match=this.tail.match(re);if(!match||match.index!==0)return"";var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;return string***REMOVED***;Scanner.prototype.scanUntil=function scanUntil(re)***REMOVED***var index=this.tail.search(re),match;switch(index)***REMOVED***case-1:match=this.tail;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)***REMOVED***this.pos+=match.length;return match***REMOVED***;function Context(view,parentContext)***REMOVED***this.view=view;this.cache=***REMOVED***".":this.view***REMOVED***;this.parent=parentContext***REMOVED***Context.prototype.push=function push(view)***REMOVED***return new Context(view,this)***REMOVED***;Context.prototype.lookup=function lookup(name)***REMOVED***var cache=this.cache;var value;if(cache.hasOwnProperty(name))***REMOVED***value=cache[name]***REMOVED***else***REMOVED***var context=this,names,index,lookupHit=false;while(context)***REMOVED***if(name.indexOf(".")>0)***REMOVED***value=context.view;names=name.split(".");index=0;while(value!=null&&index<names.length)***REMOVED***if(index===names.length-1)lookupHit=hasProperty(value,names[index]);value=value[names[index++]]***REMOVED******REMOVED***else***REMOVED***value=context.view[name];lookupHit=hasProperty(context.view,name)***REMOVED***if(lookupHit)break;context=context.parent***REMOVED***cache[name]=value***REMOVED***if(isFunction(value))value=value.call(this.view);return value***REMOVED***;function Writer()***REMOVED***this.cache=***REMOVED******REMOVED******REMOVED***Writer.prototype.clearCache=function clearCache()***REMOVED***this.cache=***REMOVED******REMOVED******REMOVED***;Writer.prototype.parse=function parse(template,tags)***REMOVED***var cache=this.cache;var tokens=cache[template];if(tokens==null)tokens=cache[template]=parseTemplate(template,tags);return tokens***REMOVED***;Writer.prototype.render=function render(template,view,partials)***REMOVED***var tokens=this.parse(template);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)***REMOVED***;Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate)***REMOVED***var buffer="";var token,symbol,value;for(var i=0,numTokens=tokens.length;i<numTokens;++i)***REMOVED***value=undefined;token=tokens[i];symbol=token[0];if(symbol==="#")value=this.renderSection(token,context,partials,originalTemplate);else if(symbol==="^")value=this.renderInverted(token,context,partials,originalTemplate);else if(symbol===">")value=this.renderPartial(token,context,partials,originalTemplate);else if(symbol==="&")value=this.unescapedValue(token,context);else if(symbol==="name")value=this.escapedValue(token,context);else if(symbol==="text")value=this.rawValue(token);if(value!==undefined)buffer+=value***REMOVED***return buffer***REMOVED***;Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate)***REMOVED***var self=this;var buffer="";var value=context.lookup(token[1]);function subRender(template)***REMOVED***return self.render(template,context,partials)***REMOVED***if(!value)return;if(isArray(value))***REMOVED***for(var j=0,valueLength=value.length;j<valueLength;++j)***REMOVED***buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)***REMOVED******REMOVED***else if(typeof value==="object"||typeof value==="string"||typeof value==="number")***REMOVED***buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)***REMOVED***else if(isFunction(value))***REMOVED***if(typeof originalTemplate!=="string")throw new Error("Cannot use higher-order sections without the original template");value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null)buffer+=value***REMOVED***else***REMOVED***buffer+=this.renderTokens(token[4],context,partials,originalTemplate)***REMOVED***return buffer***REMOVED***;Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate)***REMOVED***var value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0)return this.renderTokens(token[4],context,partials,originalTemplate)***REMOVED***;Writer.prototype.renderPartial=function renderPartial(token,context,partials)***REMOVED***if(!partials)return;var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null)return this.renderTokens(this.parse(value),context,partials,value)***REMOVED***;Writer.prototype.unescapedValue=function unescapedValue(token,context)***REMOVED***var value=context.lookup(token[1]);if(value!=null)return value***REMOVED***;Writer.prototype.escapedValue=function escapedValue(token,context)***REMOVED***var value=context.lookup(token[1]);if(value!=null)return mustache.escape(value)***REMOVED***;Writer.prototype.rawValue=function rawValue(token)***REMOVED***return token[1]***REMOVED***;mustache.name="mustache.js";mustache.version="2.3.0";mustache.tags=["***REMOVED******REMOVED***","***REMOVED******REMOVED***"];var defaultWriter=new Writer;mustache.clearCache=function clearCache()***REMOVED***return defaultWriter.clearCache()***REMOVED***;mustache.parse=function parse(template,tags)***REMOVED***return defaultWriter.parse(template,tags)***REMOVED***;mustache.render=function render(template,view,partials)***REMOVED***if(typeof template!=="string")***REMOVED***throw new TypeError('Invalid template! Template should be a "string" '+'but "'+typeStr(template)+'" was given as the first '+"argument for mustache#render(template, view, partials)")***REMOVED***return defaultWriter.render(template,view,partials)***REMOVED***;mustache.to_html=function to_html(template,view,partials,send)***REMOVED***var result=mustache.render(template,view,partials);if(isFunction(send))***REMOVED***send(result)***REMOVED***else***REMOVED***return result***REMOVED******REMOVED***;mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer;return mustache***REMOVED***);
